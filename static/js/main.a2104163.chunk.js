(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,a){},232:function(e,a,t){e.exports=t(777)},237:function(e,a,t){},296:function(e,a){},366:function(e,a,t){},659:function(e,a,t){},767:function(e,a,t){},768:function(e,a,t){},774:function(e,a,t){},777:function(e,a,t){"use strict";t.r(a);var s=t(0),l=t.n(s),n=t(30),r=t.n(n),c=(t(237),t(67));const i={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:Object({NODE_ENV:"production",PUBLIC_URL:"",BASE_SERVICE_API:"https://zu99ud1h5c.execute-api.us-east-1.amazonaws.com/prod",AWS_PROJECT_REGION:"us-east-1",AWS_COGNITO_REGION:"us-east-1",AWS_USER_POOLS_ID:"us-east-1_8LgYHCDPv",AWS_USER_POOLS_WEB_CLIENT_ID:"4ptdcfrjf96svv2svn3n4ok0jo"}).AWS_COGNITO_IDENTITY_POOL_ID,aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_8LgYHCDPv",aws_user_pools_web_client_id:"4ptdcfrjf96svv2svn3n4ok0jo",oauth:{}};var o=t(23),d=t.n(o);t(366);var m=()=>l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab2",href:"#aboutus_tab_1","data-toggle":"tab","aria-expanded":"false"},"About Us"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"aboutus_tab_1"},l.a.createElement("section",{className:"mb-4"},l.a.createElement("h2",{className:"h1-responsive font-weight-bold text-center my-4"},"Contact us"),l.a.createElement("p",{className:"text-center w-responsive mx-auto mb-5"},"Do you have any questions? Please do not hesitate to contact us directly. Our team will come back to you within a matter of hours."),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5 mb-md-0 mb-5"},l.a.createElement("div",{className:"text-center text-md-left"}),l.a.createElement("div",{className:"status"})),l.a.createElement("div",{className:"col-md-2  text-center"},l.a.createElement("ul",{className:"list-unstyled mb-0"},l.a.createElement("li",null,l.a.createElement("i",{className:"fa fa-map-marker fa-4x"}),l.a.createElement("p",null,"Stellar IT Park ,Industrial Area, Sector 62, Noida, Uttar Pradesh 201309")),l.a.createElement("li",null,l.a.createElement("i",{className:"fa fa-envelope fa-4x"}),l.a.createElement("p",null,"substitutionpro@gmail.com"))))))))));class h extends c.c{constructor(e){super(e),this.handleKeyPress=(e=>{"Enter"===e.key&&this.signInWithLoader()}),this.signInWithLoader=(()=>{d()(".loader").show(),super.signIn().then(()=>{d()(".loader").hide()}).catch(e=>{d()(".loader").hide()})}),this._validAuthStates=["signIn","signedOut","signedUp"],this.signInWithLoader=this.signInWithLoader.bind(this)}showComponent(e){return d()(document).ready(function(){d()(".Section__container___3YYTG").height("100%"),d()(".Section__container___3YYTG").parent().height("100%"),d()("#lpane_1").click(function(e){d()("#loginbox").show(),d()("#contactUs").hide()}),d()("#lpane_2").click(function(e){d()("#loginbox").hide(),d()("#contactUs").show()}),d()("#contactUs").hide()}),l.a.createElement("div",{className:"wrapper",style:{height:"100%",zIndex:"1"}},l.a.createElement("header",{className:"main-header"},l.a.createElement("a",{href:"#",className:"logo"},l.a.createElement("span",{className:"logo-mini"},l.a.createElement("b",null,"S"),"PRO"),l.a.createElement("span",{className:"logo-lg"},l.a.createElement("b",null,"Substitution"),"PRO")),l.a.createElement("nav",{className:"navbar navbar-static-top"},l.a.createElement("a",{href:"#",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},l.a.createElement("span",{className:"sr-only"},"Toggle navigation")),l.a.createElement("div",{className:"navbar-custom-menu"},l.a.createElement("ul",{className:"nav navbar-nav"})))),l.a.createElement("aside",{className:"main-sidebar"},l.a.createElement("section",{className:"sidebar"},l.a.createElement("div",{className:"user-panel"}),l.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},l.a.createElement("li",{className:"active treeview"},l.a.createElement("a",{id:"lpane_1",href:"","data-toggle":"tab"},l.a.createElement("i",{className:"fa fa-dashboard"})," ",l.a.createElement("span",null," Login "),l.a.createElement("span",{className:"pull-right-container"})))))),l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:"loginbox",style:{marginTop:"3.125rem"},className:"mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2"},l.a.createElement("div",{className:"panel panel-info"},l.a.createElement("div",{className:"panel-heading"},l.a.createElement("div",{className:"panel-title center-block"},"Sign In"),l.a.createElement("div",{style:{float:"right",fontSize:"80%",position:"relative",top:"-0.625rem"}})),l.a.createElement("div",{style:{paddingTop:"1.875rem"},className:"panel-body"},l.a.createElement("div",{style:{display:"none"},id:"login-alert",className:"alert alert-danger col-sm-12"}),l.a.createElement("form",{id:"loginform",className:"form-horizontal"},l.a.createElement("div",{style:{marginBottom:"1.5625rem"},className:"input-group"},l.a.createElement("span",{className:"input-group-addon"},l.a.createElement("i",{className:"glyphicon glyphicon-user"})),l.a.createElement("input",{id:"username",key:"username",name:"username",type:"text",onKeyPress:e=>this.handleKeyPress(e),onChange:this.handleInputChange,className:"form-control",placeholder:"username or email"})),l.a.createElement("div",{style:{marginBottom:"1.5625rem"},className:"input-group"},l.a.createElement("span",{className:"input-group-addon"},l.a.createElement("i",{className:"glyphicon glyphicon-lock"})),l.a.createElement("input",{id:"password",key:"password",name:"password",type:"password",onKeyPress:e=>this.handleKeyPress(e),onChange:this.handleInputChange,className:"form-control",placeholder:"password"})),l.a.createElement("div",{style:{marginTop:"0.625rem"},className:"form-group"},l.a.createElement("div",{className:"col-sm-12 controls center-block"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>{this.signInWithLoader()}},"Login   "),l.a.createElement("div",{className:"loader controls center-block",style:{display:"none",marginTop:"0.625rem"}})))))))),l.a.createElement("div",{id:"contactUs"},l.a.createElement(m,null)))))}}var u=t(43),p=t(782);const b={service_base_url:"https://zu99ud1h5c.execute-api.us-east-1.amazonaws.com/prod",expire_login:4,expire_cookie_field:"sessionTime",school_id:5};var E=t(142),g=t.n(E),_=t(16),v=t.n(_),f=t(38),N=t(37),S=t(59),y=t.n(S);const T=e=>({type:"UPDATE_SCHOOL_INFO",schoolId:e.schoolId,periodCount:e.periodCount,halfDayPeriod:e.halfDayPeriod,lastActiveDay:e.lastActiveDay,isAutoAssigning:e.isAutoAssigning}),w=(e,a)=>({type:"UPDATE_SELECTED_TEACHERS_INFO",payload:{ids:Array.from(e),names:Array.from(a)}}),C=(e,a)=>({type:"UPDATE_SELECTED_CLASSES_INFO",payload:{ids:Array.from(e),names:Array.from(a)}}),A=e=>({type:"SET_USER_INFO",payload:e}),D=(e,a)=>({type:"UPDATE_BLACK_LISTED_INFO",payload:{ids:Array.from(e),names:Array.from(a)}});t(659),t(660);var I=Object(u.b)(e=>({schoolId:e.schoolId,userInfo:e.userInfo,isLoading:e.isLoading}),e=>({updateSchoolInfo:a=>e(T(a)),setUserInfo:a=>e(A(a)),enableLoading:()=>e({type:"ENABLE_LOADING"}),disableLoading:()=>e({type:"DISABLE_LOADING"})}))(Object(p.a)(class extends l.a.Component{constructor(e){super(e),this.logout=(()=>{const{cookies:e}=this.props;e.remove(b.expire_cookie_field),N.a.signOut()}),this.makeRegionActive=((e,a)=>{this.setState({showAboutUsRegion:e,showPortalRegion:a})}),this.onSubmit=(()=>{const{startDate:e,endDate:a}=this.state,{schoolId:t}=this.props;if(!this.teacher_id||!this.description||!this.state.startDate||!this.state.endDate)return void alert(this.fill_all_fields);const s=y()(e).format("YYYY-MM-DD"),l=y()(a).format("YYYY-MM-DD"),n={school_id:t,teacher_id:this.teacher_id,description:this.description,start_date_absent:s,end_date_absent:l};console.log(n),v.a.post(this.base_url+"/api/create_teacher_request/",n).then(e=>alert(e.data.message)).catch(()=>alert(this.error_string))}),this.handleStartSelect=(e=>{e&&this.state.endDate&&e.getTime()>this.state.endDate.getTime()?alert(this.invalid_range_string):this.setState({startDate:e})}),this.handleEndSelect=(e=>{e&&this.state.startDate&&this.state.startDate.getTime()>e.getTime()?alert(this.invalid_range_string):this.setState({endDate:e})}),this.state={startDate:new Date,endDate:new Date,options:[],showAboutUsRegion:!1,showPortalRegion:!0},this.description="",this.teacher_id="",this.invalid_range_string="Start Date cannot be greater than End Date",this.fill_all_fields="Please fill all the fields",this.error_string="Something went wrong",this.base_url=b.service_base_url}componentDidMount(){const{cookies:e}=this.props;let a=new Date;e.get(b.expire_cookie_field)||e.set(b.expire_cookie_field,a,{path:"/"})}componentDidUpdate(e){const{schoolId:a,authState:t}=this.props;"signedIn"===t&&a!==e.schoolId&&v.a.get(b.service_base_url+"/api/get_all_teachers?school_id="+a).then(e=>{const a=e.data.teachers.map(e=>({label:e.name,value:e.id}));this.setState({options:a})})}render(){const{showAboutUsRegion:e,showPortalRegion:a}=this.state;return d()(".Section__container___3YYTG").height("100%"),d()(".Section__container___3YYTG").parent().height("100%"),l.a.createElement("div",{className:"wrapper",style:{height:"100%"}},l.a.createElement("header",{className:"main-header"},l.a.createElement("a",{href:"#",className:"logo"},l.a.createElement("span",{className:"logo-mini"},l.a.createElement("b",null,"S"),"PRO"),l.a.createElement("span",{className:"logo-lg"},l.a.createElement("b",null,"Substitution"),"PRO")),l.a.createElement("nav",{className:"navbar navbar-static-top"},l.a.createElement("a",{href:"#",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},l.a.createElement("span",{className:"sr-only"},"Toggle navigation")),l.a.createElement("div",{className:"navbar-custom-menu"},l.a.createElement("ul",{className:"nav navbar-nav"},l.a.createElement("li",null,l.a.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},l.a.createElement("i",{className:"fa fa-sign-out"}),l.a.createElement("span",{id:"logout_button",className:"hidden-xs",onClick:()=>this.logout()},"Logout"))))))),l.a.createElement("aside",{className:"main-sidebar"},l.a.createElement("section",{className:"sidebar"},l.a.createElement("div",{className:"user-panel"}),l.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},l.a.createElement("li",{className:"active treeview"},l.a.createElement("a",{id:"lpane_1",href:"#tab_1","data-toggle":"tab",onClick:()=>this.makeRegionActive(!1,!0)},l.a.createElement("i",{className:"fa fa-dashboard"})," ",l.a.createElement("span",null,"Raise Request"),l.a.createElement("span",{className:"pull-right-container"}))),l.a.createElement("li",{className:"treeview"},l.a.createElement("a",{id:"lpane_4",href:"#tab_1","data-toggle":"tab",onClick:()=>this.makeRegionActive(!0,!1)},l.a.createElement("i",{className:"fa fa-dashboard"})," ",l.a.createElement("span",null," About Us "),l.a.createElement("span",{className:"pull-right-container"})))))),a&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab1",href:"#tab_1","data-toggle":"tab","aria-expanded":"true"},"Raise Request"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"tab_1"},l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element1 col-md-2"},l.a.createElement(g.a,{selected:this.state.startDate,onSelect:this.handleStartSelect})),l.a.createElement("div",{className:"element1 col-md-2"},l.a.createElement(g.a,{selected:this.state.endDate,onSelect:this.handleEndSelect})),l.a.createElement("div",{className:"element2 col-md-2"},l.a.createElement(f.a,{options:this.state.options,onChange:e=>{this.teacher_id=e.value}})),l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("button",{id:"submit_request",className:"btn btn-success btn-sm",onClick:this.onSubmit,type:"button"},"Submit"))),l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element1 col-md-2"},l.a.createElement("textarea",{id:"reason_desc",maxLength:"200",rows:"5",cols:"53",style:{border:"0.0625rem solid gray"},onChange:e=>{this.description=e.target.value},placeholder:"Enter reason for request"}))),l.a.createElement("div",{className:"innerblock row"})))))),e&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement(m,null)))}})),k=t(53);t(766);const L=e=>{return e.teachers.map(e=>({label:e.name+(e.is_parallel?" (@) ":"")+(e.teaches_class?" (*) ":"")+" : "+e.free_count,value:e.id}))};t(767),t(768);var R=t(228),x=t.n(R);const U=e=>{return e.classes.map(e=>({label:e.c_class+"-"+e.c_section,value:e.id}))};var O=Object(u.b)(e=>({schoolId:e.schoolId,day:e.day,selectedTeachersIds:e.selectedTeachersIds,selectedTeachersNames:e.selectedTeachersNames,selectedClassesIds:e.selectedClassesIds,selectedClassesNames:e.selectedClassesNames}),null)(class extends s.Component{constructor(e){super(e),this.mergeClasses=(()=>{const{schoolId:e,day:a,parentId:t,fetchAndRenderSubsTeachersTable:s,fetchAndRenderSubsClassTable:l}=this.props,{selectedChildClasses:n}=this.state,r={parent_id:t,children_ids:n,day:a,school_id:e};v.a.post(b.service_base_url+"/api/merge_children_to_parent/",r).then(e=>{s(),l()})}),this.state={selectedChildClasses:[],mergeOptions:[]}}componentDidMount(){const{schoolId:e,parentId:a}=this.props;v.a.get(b.service_base_url+"/api/get_child_classes/?parent_id="+a+"&school_id="+e).then(e=>{this.setState({mergeOptions:U(e.data)})})}render(){const{mergeOptions:e,selectedChildClasses:a}=this.state,{mergedChildClasses:t}=this.props;let s=[];return t&&(s=t.join(", ")),l.a.createElement("div",{className:"container-merge"},l.a.createElement("div",{className:"item-merged-classes"},s),0===t.length&&l.a.createElement("div",null,l.a.createElement("div",{className:"item-multiselect"},l.a.createElement(x.a,{options:e,selected:a,onSelectedChanged:e=>this.setState({selectedChildClasses:e})})),l.a.createElement("div",{className:"item-merge-button"},l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.mergeClasses},"Merge"))))}});const F="19rem",P="15.625rem",B="500",Y="Select a teacher first",j="Select a class first",H="Some error occured. Please refresh the page after sometime";let M="desc";var K=Object(u.b)(e=>({schoolId:e.schoolId,day:e.day,selectedTeachersIds:new Set(e.selectedTeachersIds),selectedTeachersNames:new Set(e.selectedTeachersNames),selectedClassesIds:new Set(e.selectedClassesIds),selectedClassesNames:new Set(e.selectedClassesNames),blackListTeachersIds:new Set(e.blackListTeachersIds),blackListTeachersNames:new Set(e.blackListTeachersNames),periodCount:e.periodCount,halfDayPeriod:e.halfDayPeriod}),e=>({updateSelectedTeachersInfo:(a,t)=>e(w(a,t)),updateSelectedClassesInfo:(a,t)=>e(C(a,t)),updateBlackListedTeachersInfo:(a,t)=>e(D(a,t))}))(class extends s.Component{constructor(e){super(e),this.handleBtnClick=(()=>{"desc"===M?(this.refs.table.handleSort("asc","name"),M="asc"):(this.refs.table.handleSort("desc","name"),M="desc")}),this.substitutePeriod=((e,a)=>{if(void 0===e)return;const{schoolId:t,fetchAndRenderSubsTeachersTable:s,fetchAndRenderSubsClassTable:l}=this.props,n={p_id:a.id,t_id:e,school_id:t};v.a.post(b.service_base_url+"/api/substitute_teacher/",n).then(e=>{"error"!==e.data.status?(s(),l()):alert(e.data.message)})}),this.removeAsignee=(e=>{const{schoolId:a,fetchAndRenderSubsTeachersTable:t,fetchAndRenderSubsClassTable:s}=this.props,l={p_id:e.id,school_id:a};v.a.post(b.service_base_url+"/api/reset_substitution/",l).then(e=>{t(),s()})}),this.getFreeTeachers=(e=>{this.setState({currentFreeTeachers:[{label:"Loading..",value:-1}]});const{schoolId:a}=this.props;v.a.get(b.service_base_url+"/api/get_free_teachers/?p_id="+e+"&school_id="+a).then(e=>{this.setState({currentFreeTeachers:L(e.data)})})}),this.setReason=((e,a)=>{const{schoolId:t,fetchAndRenderSubsTeachersTable:s,day:l}=this.props,n={t_id:a.id,absent_type:e,day:l,school_id:t};v.a.post(b.service_base_url+"/api/set_absent_type/",n).then(e=>{s()})}),this.resetReason=(e=>{const{schoolId:a,fetchAndRenderSubsTeachersTable:t,day:s}=this.props,l={t_id:e.id,absent_type:"",day:s,school_id:a};v.a.post(b.service_base_url+"/api/reset_absent_type/",l).then(e=>{t()})}),this.changePeriodState=((e,a)=>{const{schoolId:t,day:s}=this.props,l={p_id:a,day:s,school_id:t};e.target.checked?v.a.post(b.service_base_url+"/api/mark_period_busy/",l).then(e=>{}).catch(e=>console.log(e)):v.a.post(b.service_base_url+"/api/unmark_period_busy/",l).then(e=>{}).catch(e=>console.log(e))}),this.removeTeacherFromTables=(e=>{const{schoolId:a,day:t,updateSelectedTeachersInfo:s,selectedTeachersIds:l,selectedTeachersNames:n}=this.props,r={t_id:e.id,day:t,school_id:a};v.a.post(b.service_base_url+"/api/remove_teacher_absent_list/",r).then(a=>{let t=new Set(l);t.delete(e.id);let r=new Set(n);r.delete(e.Teacher),s(t,r)})}),this.removeClassFromTables=(e=>{const{schoolId:a,day:t,selectedClassesIds:s,selectedClassesNames:l,updateSelectedClassesInfo:n}=this.props,r={c_id:e.id,day:t,school_id:a};v.a.post(b.service_base_url+"/api/remove_class_as_parent/",r).then(a=>{let t=new Set(s);t.delete(e.id);let r=new Set(l);r.delete(e.Class),n(t,r)})}),this.addTeacherToList=(e=>{const{selectedTeachersIds:a,selectedTeachersNames:t,updateSelectedTeachersInfo:s}=this.props;let l=new Set(a);l.add(e.t_id);let n=new Set(t);n.add(e.Teacher),s(l,n)}),this.whitelistTeacher=(e=>{const{updateBlackListedTeachersInfo:a,blackListTeachersIds:t,blackListTeachersNames:s,schoolId:l}=this.props,n=new Set(t);n.delete(e.id);const r=new Set(s);r.delete(e.Teacher);const c={t_id:e.id,school_id:l};v.a.post(b.service_base_url+"/api/white_list_auto_teacher/",c).then(e=>{"success"===e.data.status?a(n,r):alert(e.data.message)}).catch(()=>alert(H))}),this.cellPeriodSelectFormat=((e,a)=>{const{periodCount:t,halfDayPeriod:s}=this.props;return l.a.createElement("div",{className:"container-period"},l.a.createElement("div",{className:"teacher_subs"},e&&e.teacher_sub&&l.a.createElement("div",null," ",e.teacher_sub,l.a.createElement("button",{id:"remove_asignee",className:"remove btn btn-danger btn-xs",onClick:()=>this.removeAsignee(e)}," X "))),l.a.createElement("div",{className:"period_class"},e&&0!==e.p_class&&-1!==e.p_class&&l.a.createElement("div",null," ",e.p_class," -  ",e.p_section," ")),l.a.createElement("div",{className:"period_subject"},e&&e.p_subject&&l.a.createElement("div",null," ",e.p_subject," ")),e&&e.p_subject&&!e.p_subject.includes("*")&&l.a.createElement("div",{className:"period_selection"},l.a.createElement(f.a,{options:this.state.currentFreeTeachers,placeholder:"Select Teacher...",onChange:a=>{-1!==a.value&&this.substitutePeriod(a.value,e)},onMenuOpen:()=>this.getFreeTeachers(e.id)})," "),e&&!e.p_subject&&e.have_class&&l.a.createElement("b",null," Period has been substituted "),a&&"On Duty"===a.Reason&&!e.have_class&&l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",onClick:a=>this.changePeriodState(a,e.id),defaultChecked:e.is_busy&&!0})),a&&"1st Half Leave"===a.Reason&&!e.have_class&&e.p_number>s&&e.p_number<t&&l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",onClick:a=>this.changePeriodState(a,e.id),defaultChecked:e.is_busy&&!0})),a&&"2nd Half Leave"===a.Reason&&!e.have_class&&e.p_number<=s&&e.p_number>=0&&l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",onClick:a=>this.changePeriodState(a,e.id),defaultChecked:e.is_busy&&!0})))}),this.periodsFormat=((e,a)=>l.a.createElement("div",{className:"container-period"},l.a.createElement("div",{className:"period_class"},e&&0!==e.p_class&&-1!==e.p_class&&l.a.createElement("div",null," ",e.p_class," -  ",e.p_section," ")),l.a.createElement("div",{className:"period_subject"},e&&e.p_subject&&l.a.createElement("div",null," ",e.p_subject," ")))),this.cellClassPeriodSelectFormat=((e,a)=>{const t=[];return e&&e.map(e=>t.push(l.a.createElement("div",{key:e.id},l.a.createElement("div",{className:"teacher_subs"},e&&e.teacher_sub&&l.a.createElement("div",null," ",e.teacher_sub," ",l.a.createElement("button",{className:"remove btn btn-danger btn-xs",id:"remove_asignee",onClick:()=>this.removeAsignee(e)}," X ")," ")),l.a.createElement("div",{className:"period_class"},e&&e.teacher&&l.a.createElement("div",null," ",e.teacher," ")),l.a.createElement("div",{className:"period_subject"},e&&e.p_subject&&l.a.createElement("div",null," ",e.p_subject," ")),e.p_subject&&!e.p_subject.includes("*")&&l.a.createElement("div",{className:"period_selection"},l.a.createElement(f.a,{options:this.state.currentFreeTeachers,placeholder:"Select Teacher...",onChange:a=>{this.substitutePeriod(a.value,e)},onMenuOpen:()=>this.getFreeTeachers(e.id)}))))),l.a.createElement("div",{className:"container-period"},t)}),this.cellReasonSelectFormat=((e,a)=>l.a.createElement("div",{className:"container-reason"},l.a.createElement("div",{className:"reason"},a&&a.Reason&&l.a.createElement("div",null,a.Reason,l.a.createElement("button",{className:"remove btn btn-danger btn-xs",id:"reset_reason",onClick:()=>this.resetReason(a)},"X"))),l.a.createElement("div",{className:"reason-select"},!a.isEmpty&&l.a.createElement(f.a,{options:this.reasons,placeholder:"Select Reason...",onChange:e=>{this.setReason(e.value,a)}})))),this.cellMergeSelectFormat=((e,a)=>{const{fetchAndRenderSubsClassTable:t,fetchAndRenderSubsTeachersTable:s}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,!a.isEmpty&&l.a.createElement(O,{parentId:a.id,mergedChildClasses:a.mergedChildClasses,fetchAndRenderSubsTeachersTable:s,fetchAndRenderSubsClassTable:t})))}),this.cellRemoveButtonFormat=((e,a)=>l.a.createElement(l.a.Fragment,null,!a.isEmpty&&l.a.createElement("div",{className:"remove_row"},l.a.createElement("span",{className:"glyphicon glyphicon-trash clickable",onClick:()=>this.removeTeacherFromTables(a)})))),this.cellRemoveClassButtonFormat=((e,a)=>l.a.createElement(l.a.Fragment,null,!a.isEmpty&&l.a.createElement("div",{className:"remove_row"},l.a.createElement("span",{className:"glyphicon glyphicon-trash clickable",onClick:()=>this.removeClassFromTables(a)})))),this.cellImportButtonFormat=((e,a)=>l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:()=>this.addTeacherToList(a)}," Import "))),this.cellWhiteListButtonFormat=((e,a)=>l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:()=>this.whitelistTeacher(a)}," Whitelist "))),this.state={currentFreeTeachers:[],selectedChildClasses:[],mergeOptions:[]},this.reasons=[{label:"Leave",value:"Leave"},{label:"1st Half Leave",value:"1st Half Leave"},{label:"2nd Half Leave",value:"2nd Half Leave"},{label:"On Duty",value:"On Duty"}],this.mergeOptions=[]}render(){const{bodyData:e,headerData:a}=this.props,t=a.filter(e=>!e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),s=a.filter(e=>"period"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.periodsFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),n=a.filter(e=>"removeButton"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellRemoveButtonFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),r=a.filter(e=>"removeClassButton"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellRemoveClassButtonFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),c=a.filter(e=>"periodSelect"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellPeriodSelectFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),i=a.filter(e=>"classPeriodSelect"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellClassPeriodSelectFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),o=a.filter(e=>"reasonSelect"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellReasonSelectFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),d=a.filter(e=>"reasonMergeSelect"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellMergeSelectFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),m=a.filter(e=>"importTeacher"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellImportButtonFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),h=a.filter(e=>"whiteListButton"===e.colType).map(e=>l.a.createElement(k.TableHeaderColumn,{dataAlign:"center",dataFormat:this.cellWhiteListButtonFormat,key:e.name,width:F,height:P,columnClassName:"allow-select-overflow",tdStyle:{whiteSpace:"normal"},thStyle:{whiteSpace:"normal"},isKey:e.isKey,dataSort:e.dataSort,dataField:e.name},e.name)),u=Array.prototype.concat(m,t,s,d,o,i,c,n,r,h);return l.a.createElement("div",null,l.a.createElement(k.BootstrapTable,{maxHeight:B,ref:"table",data:e},u))}}),z=(t(774),t(21)),W=t.n(z);const G=e=>{const a=e.teacher_list.map(e=>({Teacher:e.name,id:e.id,Reason:e.absent_type,isEmpty:!1})),t=e.teacher_list.map(e=>e.periods.map(e=>e)),s=[];if(W.a.forEach(a,(e,a)=>{s.push(Object.assign({},e,t[a]))}),e.teacher_list.length>0){let e=s.length>0?W.a.clone(s[s.length-1]):{};Object.keys(e).forEach(a=>{e[a]=null}),e.isEmpty=!0;for(let a=0;a<9;a++)s.push(e)}return s},q=e=>{const a=e.classes.map(e=>({Class:e.c_class+"-"+e.c_section,id:e.id,mergedChildClasses:e.child_res.map(e=>e.c_class+"-"+e.c_section),isEmpty:!1})),t=e.classes.map(e=>e.periods.map(e=>e)),s=[];if(W.a.forEach(a,(e,a)=>{s.push(Object.assign({},e,t[a]))}),e.classes.length>0){let e=s.length>0?W.a.clone(s[s.length-1]):{};Object.keys(e).forEach(a=>{e[a]=null}),e.isEmpty=!0;for(let a=0;a<19;a++)s.push(e)}return s},X=e=>{return e.classes.filter(e=>!0===e.is_merge_parent).map(e=>({Class:e.class+"-"+e.section,id:e.id}))},J=e=>{return e.teachers.map(e=>({Teacher:e.name,Assignments:e.count}))},V=e=>{return e.data.map(e=>({id:e.id,t_id:e.t_id,Teacher:e.name,"From-Date":y()(e.start_date_absent,"YYYY-MM-DD").format("DD-MM-YYYY"),"To-Date":y()(e.end_date_absent,"YYYY-MM-DD").format("DD-MM-YYYY"),Reason:e.description}))},$=e=>{const a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=[];return W.a.forEach(e.periods,(e,s)=>{t.push({Day:a[s]}),W.a.forEach(e,(e,a)=>{t[s][a.toString()]=e})}),t},Q=[{value:0,label:"Monday"},{value:1,label:"Tuesday"},{value:2,label:"Wednesday"},{value:3,label:"Thursday"},{value:4,label:"Friday"}],Z=[{name:"Teacher",isKey:!0,dataSort:!0},{name:"Edit",colType:"removeButton"}],ee=[{name:"Class",isKey:!0,dataSort:!0},{name:"Edit",colType:"removeClassButton"}],ae=[{name:"Teacher",isKey:!0,dataSort:!0},{name:"Assignments",dataSort:!0}],te=[{name:"Teacher",isKey:!0,dataSort:!0},{name:"Edit",colType:"whiteListButton"}],se="Mail has been sent";var le=Object(u.b)(e=>({schoolId:e.schoolId,periodCount:e.periodCount,isAutoAssigning:e.isAutoAssigning,day:e.day,optionsTeachers:e.optionsTeachers,optionsClasses:e.optionsClasses,selectedTeachersIds:new Set(e.selectedTeachersIds),selectedTeachersNames:new Set(e.selectedTeachersNames),selectedClassesIds:new Set(e.selectedClassesIds),selectedClassesNames:new Set(e.selectedClassesNames),blackListTeachersIds:new Set(e.blackListTeachersIds),blackListTeachersNames:new Set(e.blackListTeachersNames),userInfo:e.userInfo,isLoading:e.isLoading}),e=>({updateDay:a=>e((e=>({type:"UPDATE_DAY",payload:e}))(a)),updateTeachersList:a=>e((e=>({type:"UPDATE_TEACHERS_LIST",payload:e}))(a)),updateClassesList:a=>e((e=>({type:"UPDATE_CLASSES_LIST",payload:e}))(a)),updateSelectedTeachersInfo:(a,t)=>e(w(a,t)),updateSelectedClassesInfo:(a,t)=>e(C(a,t)),updateBlackListedTeachersInfo:(a,t)=>e(D(a,t)),enableLoading:()=>e({type:"ENABLE_LOADING"}),disableLoading:()=>e({type:"DISABLE_LOADING"})}))(Object(p.a)(class extends s.Component{constructor(e,a){super(e,a),this.logout=(()=>{const{cookies:e}=this.props;e.remove(b.expire_cookie_field),N.a.signOut()}),this.constructHeaders=(e=>{for(let a=0;a<e;a++)this.classChartTableHeaderData.push({name:a.toString(),colType:"classPeriodSelect"}),this.chartTableHeaderData.push({name:a.toString(),colType:"periodSelect"}),this.teacherTimeTableHeaderData.push({name:a.toString(),colType:"period"});this.chartTableHeaderData.push({name:"Edit",colType:"removeButton"}),this.classChartTableHeaderData.push({name:"Edit",colType:"removeClassButton"})}),this.renderAddTeachersTable=(()=>{const{selectedTeachersIds:e,selectedTeachersNames:a}=this.props,t=[];W.a.forEach(Array.from(a),(a,s)=>{t.push({Teacher:a,id:Array.from(e)[s]})}),this.setState({teacherData:t})}),this.renderAddClassTable=(()=>{const{selectedClassesIds:e,selectedClassesNames:a}=this.props,t=[];W.a.forEach(Array.from(a),(a,s)=>{t.push({Class:a,id:Array.from(e)[s]})}),this.setState({classData:t})}),this.addTeacher=(()=>{const{selectedTeachersIds:e,updateSelectedTeachersInfo:a,selectedTeachersNames:t}=this.props;if(!this.teacher_id||!this.teacher_name)return void alert(Y);const s=new Set(e);s.add(this.teacher_id);const l=new Set(t);l.add(this.teacher_name),a(s,l)}),this.addClass=(()=>{const{selectedClassesIds:e,updateSelectedClassesInfo:a,selectedClassesNames:t}=this.props;if(!this.class_id||!this.class_section)return void alert(j);const s=new Set(e);s.add(this.class_id);const l=new Set(t);l.add(this.class_section),a(s,l)}),this.getAllTeachers=(e=>{const{updateTeachersList:a,updateSelectedTeachersInfo:t}=this.props;v.a.get(b.service_base_url+"/api/get_all_teachers/?school_id="+e).then(e=>{const s=new Set(e.data.teachers.filter(e=>!0===e.t_absent).map(e=>e.id)),l=new Set(e.data.teachers.filter(e=>!0===e.t_absent).map(e=>e.name)),n=e.data.teachers.map(e=>({label:e.name,value:e.id}));a(n),t(s,l)})}),this.getAllClasses=(e=>{const{updateSelectedClassesInfo:a,updateClassesList:t}=this.props;v.a.get(b.service_base_url+"/api/get_all_classes/?school_id="+e).then(e=>{const s=e.data.classes.map(e=>({label:e.class+"-"+e.section,value:e.id})),l=new Set(e.data.classes.filter(e=>!0===e.is_merge_parent).map(e=>e.id)),n=new Set(e.data.classes.filter(e=>!0===e.is_merge_parent).map(e=>e.class+"-"+e.section));t(s),a(l,n),this.setState({classData:X(e.data)})})}),this.fetchAndRenderSubsTeachersTable=(()=>{const{schoolId:e,day:a}=this.props;v.a.get(b.service_base_url+"/api/get_absent_teachers/?day="+a+"&school_id="+e).then(e=>{this.setState({periodsData:G(e.data)}),this.calculateTeacherAssignment()}).catch(()=>{this.genericErrorAlert(H)})}),this.fetchAndRenderSubsClassTable=(()=>{const{schoolId:e,day:a}=this.props;v.a.get(b.service_base_url+"/api/get_teachers_for_classes/?day="+a+"&school_id="+e).then(e=>{this.setState({classPeriodsData:q(e.data)}),this.calculateTeacherAssignment()}).catch(e=>{this.genericErrorAlert(H)})}),this.renderBlackListTable=(()=>{const{blackListTeachersIds:e,blackListTeachersNames:a}=this.props,t=[];W.a.forEach(Array.from(a),(a,s)=>{t.push({Teacher:a,id:Array.from(e)[s]})}),this.setState({blackListData:t})}),this.submitTeachers=(()=>{const{selectedTeachersIds:e,schoolId:a,day:t,enableLoading:s,disableLoading:l}=this.props;if(e.size&&void 0!==t&&a){s();var n={absent_ids:Array.from(e),day:t,school_id:a};v.a.post(b.service_base_url+"/api/set_absent_teachers/",n).then(()=>{this.fetchAndRenderSubsTeachersTable(),this.calculateTeacherAssignment(),this.confirmSubsTab.click(),l()}).catch(e=>{e.response&&e.response.data?(alert(e.response.data.message),window.location.reload()):alert(H),l()})}}),this.submitClasses=(()=>{const{selectedClassesIds:e,schoolId:a,day:t,enableLoading:s,disableLoading:l}=this.props;if(e.size&&void 0!==t&&a){s(),this.confirmClassesTab.click();var n={c_ids:Array.from(e),day:t,school_id:a};v.a.post(b.service_base_url+"/api/set_classes_as_parent/",n).then(e=>{this.fetchAndRenderSubsClassTable(),this.calculateTeacherAssignment(),l()}).catch(()=>this.genericErrorAlert(H))}}),this.masterReset=(()=>{const{schoolId:e,updateSelectedTeachersInfo:a,updateSelectedClassesInfo:t,enableLoading:s,disableLoading:l}=this.props;s();const n={school_id:e};v.a.post(b.service_base_url+"/api/reset_all_substituted_periods/",n).then(e=>{a(new Set,new Set),t(new Set,new Set),this.setState({periodsData:[],teacherData:[],classData:[],classPeriodsData:[],assignedPeriodsData:[]}),l()}).catch(()=>this.genericErrorAlert(H))}),this.isAutoComplete=(()=>{const{userInfo:e}=this.props;v.a.get(b.service_base_url+"/api/get_school_info?school_name="+e.attributes["custom:School"]).then(e=>{e.data.data.is_auto_assigning||(console.log("processing is done"),clearInterval(this.apiPollWorker),this.setState({isAutoAssigning:!1}),this.fetchAndRenderSubsTeachersTable())}).catch(e=>{this.genericErrorAlert(H),clearInterval(this.apiPollWorker),this.setState({isAutoAssigning:!1})})}),this.startAutoCompleteCheckScheduler=(()=>{this.setState({isAutoAssigning:!0}),this.apiPollWorker=setInterval(()=>this.isAutoComplete(),1e4)}),this.autoSubstitute=(()=>{const{schoolId:e,day:a,selectedTeachersIds:t,enableLoading:s,disableLoading:l}=this.props,n={day:a,school_id:e};t.size&&(s(),v.a.post(b.service_base_url+"/api/auto_substitute_teachers/",n).then(e=>{this.startAutoCompleteCheckScheduler(),this.fetchAndRenderSubsTeachersTable(),l()}).catch(()=>this.genericErrorAlert(H)))}),this.export=(()=>{const{schoolId:e,day:a,selectedTeachersIds:t}=this.props;t.size&&v.a.get(b.service_base_url+"/api/export_time_table/?day="+a+"&school_id="+e,{responseType:"blob"}).then(e=>{const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a;const s=new Date;t.setAttribute("download","substitution-"+y()(s,"x")+".xls"),document.body.appendChild(t),t.click(),t.remove()})}),this.exportTimetable=(()=>{const{schoolId:e}=this.props;-1!==this.teacherTimetableId&&v.a.get(b.service_base_url+"/api/export_teacher_timetable/?t_id="+this.teacherTimetableId+"&school_id="+e,{responseType:"blob"}).then(e=>{const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a;const s=new Date;t.setAttribute("download","timetable-"+y()(s,"x")+".xls"),document.body.appendChild(t),t.click(),t.remove()})}),this.exportSubsTeacherTimetable=(()=>{const{schoolId:e,day:a,selectedTeachersIds:t}=this.props;t.size&&v.a.get(b.service_base_url+"/api/export_subs_teacher_timetable/?day="+a+"&school_id="+e,{responseType:"blob"}).then(e=>{const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a;const s=new Date;t.setAttribute("download","subs-teacher-"+y()(s,"x")+".xls"),document.body.appendChild(t),t.click(),t.remove()})}),this.calculateTeacherAssignment=(()=>{const{schoolId:e,day:a}=this.props;v.a.get(b.service_base_url+"/api/calculate_teacher_assignment/?day="+a+"&school_id="+e).then(e=>{this.setState({assignedPeriodsData:J(e.data)})}).catch(()=>this.genericErrorAlert(H))}),this.makeRegionActive=(e=>{this.setState({showRegion:e})}),this.sendMail=(()=>{const{selectedTeachersIds:e,schoolId:a,day:t,enableLoading:s,disableLoading:l}=this.props;e.size&&void 0!==t&&a&&(s(),v.a.get(b.service_base_url+"/api/send_mail/?day="+t+"&school_id="+a).then(e=>{l(),alert(se)}).catch(()=>this.genericErrorAlert(H)))}),this.genericErrorAlert=(e=>{const{disableLoading:a}=this.props;alert(e),a()}),this.addTeacherToBlackList=(e=>{const{updateBlackListedTeachersInfo:a,blackListTeachersIds:t,blackListTeachersNames:s,schoolId:l}=this.props,n=new Set(t);n.add(e.value);const r=new Set(s);r.add(e.label);const c={t_id:e.value,school_id:l};v.a.post(b.service_base_url+"/api/black_list_auto_teacher/",c).then(e=>{"success"===e.data.status?a(n,r):alert(e.data.message)}).catch(()=>this.genericErrorAlert(H))}),this.hasSetChanged=((e,a)=>{const t=[...e].filter(e=>!a.has(e)),s=[...a].filter(a=>!e.has(a));return t.length>0||s>0}),this.state={periodsData:[],teacherData:[],teacherTableData:[],teacherRequestData:[],classData:[],classPeriodsData:[],blackListData:[],assignedPeriodsData:[],showRegion:"substitution",isAutoAssigning:!1},this.teacher_id="",this.teacher_name="",this.class_id="",this.class_section="",this.chartTableHeaderData=[{name:"Teacher",isKey:!0},{name:"Reason",colType:"reasonSelect"}],this.teacherTimeTableHeaderData=[{name:"Day",isKey:!0}],this.classChartTableHeaderData=[{name:"Class",isKey:!0},{name:"Merge",colType:"reasonMergeSelect"}],this.confirmSubsTab=void 0,this.confirmClassesTab=void 0,this.aboutUsRef=void 0,this.subsSection=void 0,this.apiPollWorker=null,this.timetableTeacherName="",this.teacherTimetableId=-1}displayTeacherTimeTable(e,a){const{schoolId:t}=this.props;v.a.get(b.service_base_url+"/api/get_teacher_timetable/?t_id="+a+"&school_id="+t).then(e=>{this.setState({teacherTableData:$(e.data)})}).catch(()=>{this.genericErrorAlert(H)})}componentDidMount(){const{cookies:e}=this.props;let a=new Date;e.get(b.expire_cookie_field)||e.set(b.expire_cookie_field,a,{path:"/"})}componentDidUpdate(e){const{schoolId:a,isAutoAssigning:t,periodCount:s,authState:l,updateBlackListedTeachersInfo:n}=this.props;if("signedIn"===l){if(this.hasSetChanged(this.props.selectedTeachersIds,e.selectedTeachersIds)&&(this.renderAddTeachersTable(),this.fetchAndRenderSubsTeachersTable()),this.hasSetChanged(this.props.selectedClassesIds,e.selectedClassesIds)&&(this.renderAddClassTable(),this.fetchAndRenderSubsClassTable()),this.hasSetChanged(this.props.blackListTeachersIds,e.blackListTeachersIds)&&this.renderBlackListTable(),a!==e.schoolId){this.getAllTeachers(a),this.getAllClasses(a);const e=y()().format("YYYY-MM-DD");v.a.get(b.service_base_url+"/api/get_teacher_request_list?school_id="+a+"&start_date="+e+"&end_date="+e).then(e=>{this.setState({teacherRequestData:V(e.data)})}),v.a.get(b.service_base_url+"/api/fetch_auto_black_list_teacher?school_id="+a).then(e=>{const a=new Set(e.data.teachers.map(e=>e.id)),t=new Set(e.data.teachers.map(e=>e.name));n(a,t)})}t!==e.isAutoAssigning&&this.startAutoCompleteCheckScheduler(),s!==e.periodCount&&this.constructHeaders(s)}}render(){d()(".Section__container___3YYTG").height("100%"),d()(".Section__container___3YYTG").parent().height("100%");const{day:e,updateDay:a,optionsTeachers:t,optionsClasses:s,userInfo:n,isLoading:r}=this.props,{showRegion:c,isAutoAssigning:i,blackListData:o,teacherTableData:h,teacherData:u,teacherRequestData:p,periodsData:b,assignedPeriodsData:E,classData:g,classPeriodsData:_}=this.state;return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement("div",{className:"loader-full"}),l.a.createElement("div",{className:"".concat(r?"loading-layer":""," wrapper"),style:{height:"100%"},disabled:!0},l.a.createElement("header",{className:"main-header"},l.a.createElement("a",{href:"#",className:"logo"},l.a.createElement("span",{className:"logo-mini"},l.a.createElement("b",null,"S"),"PRO"),l.a.createElement("span",{className:"logo-lg"},l.a.createElement("b",null,"Substitution"),"PRO")),l.a.createElement("nav",{className:"navbar navbar-static-top"},l.a.createElement("a",{href:"#",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},l.a.createElement("span",{className:"sr-only"},"Toggle navigation")),l.a.createElement("div",{className:"navbar-custom-menu"},l.a.createElement("ul",{className:"nav navbar-nav"},l.a.createElement("li",null,l.a.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},l.a.createElement("i",{className:"fa fa-asterisk"}),l.a.createElement("span",{id:"reset_all",onClick:this.masterReset},"Master Reset"))),l.a.createElement("li",null,l.a.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",onClick:()=>this.logout()},l.a.createElement("i",{className:"fa fa-sign-out"}),l.a.createElement("span",{id:"logout_button",className:"hidden-xs",onClick:()=>this.logout()},"Logout"))))))),l.a.createElement("aside",{className:"main-sidebar"},l.a.createElement("section",{className:"sidebar"},l.a.createElement("div",{className:"user-panel"},l.a.createElement("div",{className:"pull-left image"},n&&l.a.createElement("img",{src:"F"===n.attributes.gender?"dist/img/avatar2.png":"dist/img/avatar5.png",className:"img-circle",alt:"User"})),l.a.createElement("div",{className:"pull-left info"},l.a.createElement("p",null," ",n&&n.attributes.name," "),l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-circle text-success"})," Online"))),l.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},l.a.createElement("li",{className:"active treeview"},l.a.createElement("a",{href:"#teacherwise_tab_1","data-toggle":"tab",onClick:()=>this.makeRegionActive("substitution")},l.a.createElement("i",{className:"fa fa-dashboard"})," ",l.a.createElement("span",null,"Create Substitution Chart"),l.a.createElement("span",{className:"pull-right-container"}))),l.a.createElement("li",{className:"treeview"},l.a.createElement("a",{href:"#timetable_tab_1","data-toggle":"tab",onClick:()=>this.makeRegionActive("timetable")},l.a.createElement("i",{className:"fa fa-search"})," ",l.a.createElement("span",null," Timetable "),l.a.createElement("span",{className:"pull-right-container"}))),l.a.createElement("li",{className:"treeview"},l.a.createElement("a",{href:"#settings_tab_1","data-toggle":"tab",onClick:()=>this.makeRegionActive("settings")},l.a.createElement("i",{className:"fa fa-cogs"})," ",l.a.createElement("span",null," Settings "),l.a.createElement("span",{className:"pull-right-container"})))))),"substitution"===c&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab1",href:"#teacherwise_tab_1","data-toggle":"tab","aria-expanded":"true"},"Mark Absentees")),l.a.createElement("li",{className:""},l.a.createElement("a",{href:"#teacherwise_tab_2",ref:e=>this.confirmSubsTab=e,"data-toggle":"tab","aria-expanded":"false"},"Teacherwise Substitution"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"teacherwise_tab_1"},l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element1 col-md-2"},l.a.createElement(f.a,{styles:{menu:e=>({...e,zIndex:2})},placeholder:"Select Day..",options:Q,value:Q[e],onChange:e=>{a(e.value)}})),l.a.createElement("div",{className:"element2 col-md-2"},l.a.createElement(f.a,{styles:{menu:e=>({...e,zIndex:2})},placeholder:"Select Teacher..",options:t,onChange:e=>{this.teacher_id=e.value,this.teacher_name=e.label}})),l.a.createElement("div",{className:"element3 col-md-1 center-block"},l.a.createElement("button",{id:"teacher_add_button",className:"btn btn-primary btn-sm",type:"button",onClick:this.addTeacher,disabled:i||r},"Add Teacher")),l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("button",{id:"generate_sub_table",className:"btn btn-success btn-sm",onClick:this.submitTeachers,disabled:i||r,type:"button"},"Submit"))),l.a.createElement("div",{className:"innerblock row"}),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},"Teacher List"),!i&&!r&&l.a.createElement(K,{bodyData:u,headerData:Z,fetchAndRenderSubsClassTable:this.fetchAndRenderSubsClassTable,fetchAndRenderSubsTeachersTable:this.fetchAndRenderSubsTeachersTable}),i&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("div",{className:"loader-small"})," ",l.a.createElement("div",null," Auto assigning ... ")))),l.a.createElement("div",{className:"tab-pane",id:"teacherwise_tab_2"},l.a.createElement("div",{className:"innerblock"},l.a.createElement("button",{id:"auto_sub_table",className:"btn btn-primary btn-sm",onClick:this.autoSubstitute,type:"button",disabled:i||r},"Auto Assign"),l.a.createElement("button",{id:"export",style:{marginLeft:10},onClick:this.export,className:"btn btn-primary btn-sm",disabled:i||r}," Export"),l.a.createElement("button",{id:"export_subs_teacher_timetable",style:{marginLeft:10},onClick:this.exportSubsTeacherTimetable,className:"btn btn-primary btn-sm",disabled:i||r}," Substitutes Allocation")),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},"Teacher TimeTable"),!i&&!r&&l.a.createElement(K,{bodyData:b,headerData:this.chartTableHeaderData,fetchAndRenderSubsClassTable:this.fetchAndRenderSubsClassTable,fetchAndRenderSubsTeachersTable:this.fetchAndRenderSubsTeachersTable}),i&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("div",{className:"loader-small"})," ",l.a.createElement("div",null," Auto assigning ... "))),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},"Assigned Teachers"),l.a.createElement("div",null,l.a.createElement(K,{bodyData:E,headerData:ae})))),l.a.createElement("div",{className:"tab-pane",id:"mergeclass_tab_3"},l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"element1 col-md-2"},l.a.createElement(f.a,{styles:{menu:e=>({...e,zIndex:2})},placeholder:"Select Class..",options:s,onChange:e=>{this.class_id=e.value,this.class_section=e.label}})),l.a.createElement("button",{id:"class_add_button",style:{marginLeft:10},onClick:this.addClass,className:"btn btn-primary btn-sm",disabled:i||r,type:"button"},"Add Class"),l.a.createElement("button",{id:"generate_class_table",style:{marginLeft:10},onClick:this.submitClasses,disabled:i||r,className:"btn btn-success btn-sm",type:"button"},"Submit"),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},"Class List"),!i&&!r&&l.a.createElement(K,{bodyData:g,headerData:ee,fetchAndRenderSubsClassTable:this.fetchAndRenderSubsClassTable})))),l.a.createElement("div",{className:"tab-pane",id:"mergeclass_tab_4"},l.a.createElement("div",{className:"innerblock"},l.a.createElement("button",{id:"export",style:{marginLeft:10},onClick:this.export,className:"btn btn-primary btn-sm",disabled:i||r}," Export "),l.a.createElement("button",{id:"send_mail",style:{marginLeft:10},onClick:this.sendMail,className:"btn btn-primary btn-sm",disabled:i||r}," Send Mail")),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},"Class TimeTable"),!i&&!r&&l.a.createElement(K,{bodyData:_,headerData:this.classChartTableHeaderData,fetchAndRenderSubsClassTable:this.fetchAndRenderSubsClassTable,fetchAndRenderSubsTeachersTable:this.fetchAndRenderSubsTeachersTable}),i&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("div",{className:"loader-small"})," ",l.a.createElement("div",null," Auto assigning ... "))),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},"Assigned Teachers"),l.a.createElement("div",null,l.a.createElement(K,{bodyData:E,headerData:ae})))))))),"aboutus"===c&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement(m,null)),"timetable"===c&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab2",href:"#info_tab_1","data-toggle":"tab","aria-expanded":"false"},"Timetable"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"info_tab_1"},l.a.createElement("div",{className:"innerblock"},l.a.createElement(f.a,{styles:{menu:e=>({...e,zIndex:2})},placeholder:"Select Teacher..",options:t,onChange:e=>{this.displayTeacherTimeTable(e.label,e.value),this.teacherTimetableId=e.value,this.timetableTeacherName=e.label}})),l.a.createElement("div",{className:"innerblock"},l.a.createElement("button",{id:"export_timetable",onClick:this.exportTimetable,className:"btn btn-primary btn-sm",disabled:i||r}," Export")),l.a.createElement("div",{className:"innerblock"},l.a.createElement("div",{className:"title"},this.timetableTeacherName),l.a.createElement(K,{bodyData:h,headerData:this.teacherTimeTableHeaderData}))))))),"settings"===c&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab1",href:"#settings_tab_1","data-toggle":"tab","aria-expanded":"false"},"Autosubstitution"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"blacklist_tab_1"},l.a.createElement("section",{className:"mb-4"},l.a.createElement("div",{className:"innerblock"},"Add teachers to this list to prevent them from being picked up for Autosubstitution."),l.a.createElement("div",{className:"innerblock"},l.a.createElement(f.a,{styles:{menu:e=>({...e,zIndex:2})},options:t,onChange:e=>{this.addTeacherToBlackList(e)}})),l.a.createElement("div",{className:"innerblock"},l.a.createElement(K,{bodyData:o,headerData:te}))))))))))}}));const ne=[{value:"M",label:"Male"},{value:"F",label:"Female"}],re=[{value:"Admin",label:"Admin"},{value:"Staff",label:"Staff"},{value:"Superuser",label:"Superuser"}];var ce=Object(u.b)(e=>({schoolId:e.schoolId,userInfo:e.userInfo,isLoading:e.isLoading}),e=>({updateSchoolInfo:a=>e(T(a)),setUserInfo:a=>e(A(a)),enableLoading:()=>e({type:"ENABLE_LOADING"}),disableLoading:()=>e({type:"DISABLE_LOADING"})}))(Object(p.a)(class extends l.a.Component{constructor(e){super(e),this.makeRegionActive=((e,a)=>{this.setState({showOnboardRegion:e,showUpdateRegion:a,file:void 0})}),this.logout=(()=>{const{cookies:e}=this.props;this.setState({userData:"John Doe"}),e.remove(b.expire_cookie_field),N.a.signOut()}),this.createUser=(()=>{this.newUserData.name&&this.newUserData.userName&&this.newUserData.password&&this.newUserData.birthDate&&this.newUserData.email&&this.newUserData.gender&&this.newUserData.orgName&&this.newUserData.userType?N.a.signUp({username:this.newUserData.userName,password:this.newUserData.password,attributes:{birthdate:this.newUserData.birthDate,gender:this.newUserData.gender,email:this.newUserData.email,name:this.newUserData.name,"custom:School":this.newUserData.orgName,"custom:userRole":this.newUserData.userType}}).then(()=>{alert("New User created successfully")}).catch(()=>{alert("Some error occured.")}):alert(this.fill_all_fields)}),this.updateUser=(()=>{this.oldUserData.orgName&&this.oldUserData.userType||alert(this.fill_all_fields),N.a.currentAuthenticatedUser().then(e=>N.a.updateUserAttributes(e,{"custom:School":this.oldUserData.orgName,"custom:userRole":this.oldUserData.userType}).then(()=>alert("User update successfully")).catch(()=>alert("Some error occured."))).catch(()=>alert("Some error occured."))}),this.uploadTimeTable=(()=>{const{file:e}=this.state;if(!e)return void alert("Please select a file first");const a=new FormData;a.append("file",e),v.a.post(b.service_base_url+"/api/upload_school_timetable/",a,{headers:{"content-type":"multipart/form-data"}}).then(()=>{alert("Upload has started"),this.setState({file:void 0})}).catch(()=>alert("Some error occured"))}),this.state={showOnboardRegion:!0,showUpdateRegion:!1,file:void 0},this.newUserData={},this.oldUserData={},this.fill_all_fields="Please fill all the fields"}componentDidMount(){const{cookies:e}=this.props;let a=new Date;e.get(b.expire_cookie_field)||e.set(b.expire_cookie_field,a,{path:"/"})}render(){const{showOnboardRegion:e,showUpdateRegion:a}=this.state,{userInfo:t}=this.props;return d()(".Section__container___3YYTG").height("100%"),d()(".Section__container___3YYTG").parent().height("100%"),l.a.createElement("div",{className:"wrapper",style:{height:"100%"}},l.a.createElement("header",{className:"main-header"},l.a.createElement("a",{href:"#",className:"logo"},l.a.createElement("span",{className:"logo-mini"},l.a.createElement("b",null,"S"),"PRO"),l.a.createElement("span",{className:"logo-lg"},l.a.createElement("b",null,"Substitution"),"PRO")),l.a.createElement("nav",{className:"navbar navbar-static-top"},l.a.createElement("a",{href:"#",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},l.a.createElement("span",{className:"sr-only"},"Toggle navigation")),l.a.createElement("div",{className:"navbar-custom-menu"},l.a.createElement("ul",{className:"nav navbar-nav"},l.a.createElement("li",null,l.a.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},l.a.createElement("i",{className:"fa fa-sign-out"}),l.a.createElement("span",{id:"logout_button",className:"hidden-xs",onClick:()=>this.logout()},"Logout"))))))),l.a.createElement("aside",{className:"main-sidebar"},l.a.createElement("section",{className:"sidebar"},l.a.createElement("div",{className:"user-panel"}),l.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},l.a.createElement("li",{className:"active treeview",onClick:()=>this.makeRegionActive(!0,!1)},l.a.createElement("a",{id:"lpane_1",href:"#tab_1","data-toggle":"tab"},l.a.createElement("i",{className:"fa fa-dashboard"})," ",l.a.createElement("span",null,"Onboard"),l.a.createElement("span",{className:"pull-right-container"}))),l.a.createElement("li",{className:"treeview"},l.a.createElement("a",{id:"lpane_1",href:"#tab_1","data-toggle":"tab",onClick:()=>this.makeRegionActive(!1,!0)},l.a.createElement("i",{className:"fa fa-dashboard"})," ",l.a.createElement("span",null,"Update"),l.a.createElement("span",{className:"pull-right-container"})))))),e&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab1",href:"#tab_1","data-toggle":"tab","aria-expanded":"true"}," Register")),l.a.createElement("li",null,l.a.createElement("a",{id:"tab2",href:"#tab_2","data-toggle":"tab","aria-expanded":"true"}," Upload Timetable"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"tab_1"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"example2"},"Name"),l.a.createElement("input",{type:"text",id:"example2",className:"form-control form-control-md",onChange:e=>this.newUserData.name=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"Username"),l.a.createElement("input",{type:"text",id:"example2",className:"form-control form-control-md",onChange:e=>this.newUserData.userName=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"Password"),l.a.createElement("input",{type:"password",id:"example2",className:"form-control form-control-md",onChange:e=>this.newUserData.password=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"Birthdate"),l.a.createElement("input",{type:"text",id:"example2",className:"form-control form-control-md",onChange:e=>this.newUserData.birthDate=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"Email"),l.a.createElement("input",{type:"text",id:"example2",className:"form-control form-control-md",onChange:e=>this.newUserData.email=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"Gender"),l.a.createElement(f.a,{options:ne,onChange:e=>this.newUserData.gender=e.value}),l.a.createElement("label",{htmlFor:"example2"},"Organization Name"),l.a.createElement("input",{type:"text",id:"example2",className:"form-control form-control-md",onChange:e=>this.newUserData.orgName=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"User Type"),l.a.createElement(f.a,{options:re,onChange:e=>this.newUserData.userType=e.value})),l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("button",{id:"submit_request",className:"btn btn-success btn-sm",onClick:this.createUser,type:"button"},"Submit")))),l.a.createElement("div",{className:"tab-pane",id:"tab_2"},l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("input",{type:"file",name:"file",onChange:e=>this.setState({file:e.target.files[0]})}))),l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("button",{id:"submit_request",className:"btn btn-success btn-sm",onClick:this.uploadTimeTable,type:"button"},"Upload")))))))),a&&l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("section",{className:"content"},l.a.createElement("div",{id:"tabContent",className:"nav-tabs-custom"},l.a.createElement("ul",{className:"nav nav-tabs",style:{background:"#3c8dbc63"}},l.a.createElement("li",{className:"active"},l.a.createElement("a",{id:"tab1",href:"#tab_1","data-toggle":"tab","aria-expanded":"true"}," Update User")),l.a.createElement("li",null,l.a.createElement("a",{id:"tab2",href:"#tab_2","data-toggle":"tab","aria-expanded":"true"}," Update Timetable "))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane active",id:"tab_1"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"example2"},"Current Organization Name : "),l.a.createElement("label",{className:"form-control form-control-md"},t&&t.attributes["custom:School"]),l.a.createElement("label",{htmlFor:"example2"},"New Organization Name"),l.a.createElement("input",{type:"text",id:"example2",className:"form-control form-control-md",onChange:e=>this.oldUserData.orgName=e.target.value}),l.a.createElement("label",{htmlFor:"example2"},"Current User Role : "),l.a.createElement("label",{className:"form-control form-control-md"},t&&t.attributes["custom:userRole"]),l.a.createElement("label",{htmlFor:"example2"},"New User Role"),l.a.createElement(f.a,{options:re,onChange:e=>this.oldUserData.userType=e.value})),l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("button",{id:"submit_request",className:"btn btn-success btn-sm",onClick:this.updateUser,type:"button"},"Submit")))),l.a.createElement("div",{className:"tab-pane",id:"tab_2"},l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("input",{type:"file",name:"file",onChange:e=>this.setState({file:e.target.files[0]})}))),l.a.createElement("div",{className:"innerblock row"},l.a.createElement("div",{className:"element4 col-md-3"},l.a.createElement("button",{id:"submit_request",className:"btn btn-success btn-sm",onClick:this.uploadTimeTable,type:"button"},"Upload")))))))))}})),ie=t(229),oe=t(27);const de=()=>l.a.createElement("div",{id:"notfound"},l.a.createElement("div",{className:"notfound"},l.a.createElement("div",{className:"notfound-404"}),l.a.createElement("h1",null,"404"),l.a.createElement("h2",null,"Oops! Page Could Not Be Found"),l.a.createElement("p",null,"Sorry but the page you are looking for does not exist, have been removed. name changed or is temporarily unavailable")));var me=Object(u.b)(e=>({userInfo:e.userInfo}),e=>({updateSchoolInfo:a=>e(T(a)),setUserInfo:a=>e(A(a)),resetReduxState:()=>e({type:"RESET_REDUX_STATE"})}))(Object(p.a)(class extends s.Component{componentDidUpdate(e){const{authState:a,updateSchoolInfo:t,setUserInfo:s,resetReduxState:l,cookies:n}=this.props;if(e.authState!==a)if("signedIn"===a){let e=new Date,a=n.get(b.expire_cookie_field);if(a){var r=new Date(a);if(Math.abs(e-r)/36e5>b.expire_login)return n.remove(b.expire_cookie_field),void N.a.signOut()}N.a.currentSession().then(e=>{let a=e.getIdToken().getJwtToken();v.a.defaults.headers.common.Authorization=a,v.a.interceptors.response.use(void 0,e=>{let a=e.response;return 401===a.status&&a.config&&!a.config.__isRetryRequest?new Promise((a,t)=>{N.a.currentSession().then(t=>{let s=t.getIdToken().getJwtToken();e.config.headers.Authorization=s,v.a.defaults.headers.common.Authorization=s,a(v.a.request(e.config))}).catch(e=>{console.log("could not refresh credentials"),alert("Something went wrong.Please refresh the page"),t(e)})}):new Promise((a,t)=>{t(e)})}),N.a.currentUserInfo().then(e=>{console.log(e),s(e);const a=e.attributes["custom:School"];v.a.get(b.service_base_url+"/api/get_school_info?school_name="+a).then(e=>{if(-1!==e.data.data.id){const a={schoolId:e.data.data.id,periodCount:e.data.data.period_count,halfDayPeriod:e.data.data.half_day_period,lastActiveDay:e.data.data.last_active_day,isAutoAssigning:e.data.data.is_auto_assigning};t(a)}}).catch(e=>console.log(e))}).catch(e=>console.log(e))})}else"signIn"===a&&l()}render(){const{authState:e,userInfo:a}=this.props;return console.log(a),l.a.createElement(ie.a,null,"signedIn"===e&&l.a.createElement("div",{style:{height:"100%"}},l.a.createElement(oe.d,null,a&&("Admin"===a.attributes["custom:userRole"]||"Superuser"===a.attributes["custom:userRole"])&&l.a.createElement(oe.b,{path:"/",exact:!0,render:a=>l.a.createElement(le,Object.assign({},a,{authState:e}))}),a&&("Staff"===a.attributes["custom:userRole"]||"Admin"===a.attributes["custom:userRole"]||"Superuser"===a.attributes["custom:userRole"])&&l.a.createElement(oe.b,{path:"/request-portal",exact:!0,render:a=>l.a.createElement(I,Object.assign({},a,{authState:e}))}),a&&"Superuser"===a.attributes["custom:userRole"]&&l.a.createElement(oe.b,{path:"/onboard-partner",exact:!0,render:a=>l.a.createElement(ce,Object.assign({},a,{authState:e}))}),a&&"Staff"===a.attributes["custom:userRole"]&&l.a.createElement(oe.b,{render:()=>l.a.createElement(oe.a,{to:"/request-portal"})}),a&&l.a.createElement(oe.b,{component:de}))))}}));var he=class extends l.a.Component{render(){return l.a.createElement("div",null,l.a.createElement(c.a,{hide:[c.b,c.c,c.d],amplifyConfig:i},l.a.createElement(h,null),l.a.createElement(me,null)))}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=t(230);let pe=(new Date).getDay();6==pe||0==pe?pe=0:pe-=1;const be={schoolId:-1,periodCount:0,halfDayPeriod:0,day:pe,optionsTeachers:[],optionsClasses:[],selectedTeachersIds:new Set,selectedTeachersNames:new Set,selectedClassesIds:new Set,selectedClassesNames:new Set,blackListTeachersIds:new Set,blackListTeachersNames:new Set,userInfo:void 0,isLoading:!1,isAutoAssigning:!1},Ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_SCHOOL_INFO":return{...e,schoolId:a.schoolId,periodCount:a.periodCount,day:-1!==a.lastActiveDay?a.lastActiveDay:e.day,isAutoAssigning:a.isAutoAssigning,halfDayPeriod:a.halfDayPeriod};case"UPDATE_DAY":return{...e,day:a.payload};case"UPDATE_TEACHERS_LIST":return{...e,optionsTeachers:a.payload};case"UPDATE_SELECTED_TEACHERS_INFO":return{...e,selectedTeachersIds:a.payload.ids,selectedTeachersNames:a.payload.names};case"UPDATE_CLASSES_LIST":return{...e,optionsClasses:a.payload};case"UPDATE_SELECTED_CLASSES_INFO":return{...e,selectedClassesIds:a.payload.ids,selectedClassesNames:a.payload.names};case"UPDATE_BLACK_LISTED_INFO":return{...e,blackListTeachersIds:a.payload.ids,blackListTeachersNames:a.payload.names};case"SET_USER_INFO":return{...e,userInfo:a.payload};case"ENABLE_LOADING":return{...e,isLoading:!0};case"DISABLE_LOADING":return{...e,isLoading:!1};case"RESET_REDUX_STATE":return be;default:return e}};const ge=()=>{return Object(ue.a)(Ee,be,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())};var _e=t(783);N.b.configure({...i,Analytics:{disabled:!0}});const ve=ge();r.a.render(l.a.createElement(_e.a,null,l.a.createElement(u.a,{store:ve},l.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.a2104163.chunk.js.map